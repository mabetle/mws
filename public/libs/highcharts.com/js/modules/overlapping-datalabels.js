(function(k){var l=k.Chart,j=k.each,m=k.pick,n=HighchartsAdapter.addEvent;l.prototype.callbacks.push(function(e){function f(){var c=[];j(e.series,function(a){var b=a.options.dataLabels,d=a.dataLabelCollections||["dataLabel"];(b.enabled||a._hasPointLabels)&&!b.allowOverlap&&a.visible&&j(d,function(b){j(a.points,function(a){if(a[b])a[b].labelrank=m(a.labelrank,a.shapeArgs&&a.shapeArgs.height),c.push(a[b])})})});e.hideOverlappingLabels(c)}f();n(e,"redraw",f)});l.prototype.hideOverlappingLabels=function(e){var f=
e.length,c,a,b,d,g,h,i;for(a=0;a<f;a++)if(c=e[a])c.oldOpacity=c.opacity,c.newOpacity=1;e.sort(function(a,b){return(b.labelrank||0)-(a.labelrank||0)});for(a=0;a<f;a++){b=e[a];for(c=a+1;c<f;++c)if(d=e[c],b&&d&&b.placed&&d.placed&&b.newOpacity!==0&&d.newOpacity!==0&&(g=b.alignAttr,h=d.alignAttr,i=2*(b.box?0:b.padding),g=!(h.x>g.x+(b.width-i)||h.x+(d.width-i)<g.x||h.y>g.y+(b.height-i)||h.y+(d.height-i)<g.y)))(b.labelrank<d.labelrank?b:d).newOpacity=0}j(e,function(a){var b,c;if(a){c=a.newOpacity;if(a.oldOpacity!==
c&&a.placed)c?a.show(!0):b=function(){a.hide()},a.alignAttr.opacity=c,a[a.isOld?"animate":"attr"](a.alignAttr,null,b);a.isOld=!0}})}})(Highcharts);
